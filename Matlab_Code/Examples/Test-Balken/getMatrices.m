function [ M, K ] = getMatrices( m, l, I, E, G, A, r)
%GETMATRICES Summary of this function goes here
%   Detailed explanation goes here

M = zeros(8); K = zeros(8);

Mf = zeros(12); Kf = zeros(12);
indices = [2,3,5,6,8,9,11,12];
%% stiffness matrix
K(1,1) = 1/2*12*E*I/l^3;
K(2,2) = K(1,1); K(5,5) = K(1,1); K(6,6) = K(1,1);

K(3,3) = 1/2*4*E*I/l;
K(4,4) = K(3,3); K(7,7) = K(3,3); K(8,8) = K(3,3);

K(3,2) = -6*E*I/l^2;
K(4,1) = -K(3,2); K(7,2) = K(3,2); K(8,1) = -K(3,2); 
                  K(5,4) = K(3,2); K(6,3) = -K(3,2); 
                  K(8,5) = K(3,2); K(7,6) = -K(3,2); 
                  
K(7,3) = 2*E*I/l^2; K(8,4) = K(7,3); 
                  
K(5,1) = -K(1,1); K(6,2) = -K(1,1);

Kf(indices,indices) = K;
Kf(1,1) = E*A/l/2;
Kf(7,7) = Kf(1,1);
Kf(4,4) = G*2*I/l/2;
Kf(10,10) = Kf(3,3);
Kf(7,1) = -2*Kf(1,1);
Kf(10,4)= -2*Kf(4,4);

K = K + K';
Kf = Kf + Kf';
%% mass matrix
% M(1,1) = 1/2*13/35; M(2,2) = M(1,1); M(5,5) = M(1,1); M(6,6) = M(1,1);
% 
% M(3,3) = 1/2*l^2/105; M(4,4) = M(3,3); M(7,7) = M(3,3); M(8,8) = M(3,3); 
% 
% M(3,2) = -11*l/210; M(4,1) = -M(3,2); M(7,6) = -M(3,2); M(8,5) = M(3,2);
% 
% M(5,1) = 9/70; M(6,2) = M(5,1);
% 
% M(7,2) = 13*l/420; M(8,1) = -M(7,2); M(6,3) = -M(7,2); M(5,4) = M(7,2);
% 
% M(7,3) = -l^2/140; M(8,4) = M(7,3);

M(1,1) = 156/2; M(2,2) = M(1,1); M(5,5) = M(1,1); M(6,6) = M(1,1);

M(3,3) = 4*l^2/2; M(4,4) = M(3,3); M(7,7) = M(3,3); M(8,8) = M(3,3); 

M(4,1) = 22*l;   M(3,2) = -M(4,1); 

M(7,6) = M(4,1); M(8,5) = -M(4,1);

M(5,1) = 54; M(6,2) = M(5,1);

M(7,2) = 13*l; M(8,1) = -M(7,2);
M(6,3) = M(8,1); M(5,4) = M(7,2);

M(7,3) = -3*l^2; M(8,4) = M(7,3);

Mf(indices,indices) = M;
Mf(1,1) = 1/3/2;
Mf(7,7) = Mf(1,1);
Mf(4,4) = r^2/3/2;
Mf(10,10) = Mf(3,3);
Mf(7,1) = Mf(1,1);
Mf(10,4)= Mf(4,4);

 
M = m/420*(M + M');
Mf = m/420*(Mf + Mf');
end